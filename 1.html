<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://kit.fontawesome.com/37cd0d651d.js" crossorigin="anonymous"></script>
    <style>
      body {height:2000px}
      .box {background:blue; height:200px; width:200px;margin:0 auto;}
      .box:nth-child(odd) {background:red;}
      .box:first-child {background:purple;}
      .pagination {text-align:center;}
      .infinite {
        counter-reset: section;
      }
      .list {
        text-align:center;
      }
      .list:before {
        counter-increment: section;
        content: counter(section);  
        color:black;
      margin:0 auto;
        font-size: 40px;
      }
    </style>
</head>
<body>
  <div class="infinite">
    <div class="list">
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
    </div>
    </div>
    <div class="pagination">페이지네이션</div>
    
    <script>
      let page=1;
      let screenHeight = screen.height; // 화면 크기
      let fullContent = document.querySelector('.infinite'); // 전체를 둘러싼 컨텐츠 정보획득
      window.addEventListener("scroll", (event) => {
        let scrollY = this.scrollY;
        console.log(`전체높이:${screenHeight}`);
        if(scrollY>=screenHeight*0.8){
          console.log('다음페이지 요청');
          console.log(`전체높이의80%:${screenHeight*0.8}`);
          console.log(`스크롤:${scrollY}`);
          const listArea=document.querySelector('.infinite');
          const divList=makeDivClassList();
          listArea.append(makeDivsClassBox(divList));
          page+=1;
          history.pushState(null, null,`http://127.0.0.1:5500/1.html?page=${page}`);
        }
    });
    function makeDivClassList() {
      const div=document.createElement('div');
      div.classList.add('list');
      return div;
    }
    function makeDivsClassBox(divList) {
      for(let i=0;i<5;i++){
        const div=document.createElement('div');
        div.classList.add('box');
        divList.append(div);
      }
      return divList;
    }
    </script>
</body>
</html>